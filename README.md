## HabitFlow

HabitFlow — pet‑проект трекера привычек и задач с дашбордом, статистикой и целями на базе Supabase. Подходит как демонстрация фронтенд‑скиллов и архитектуры небольшого приложения.

### Стек

- **Next.js 16** (App Router)
- **React 19**
- **TypeScript**
- **Zustand** — глобальное состояние (авторизация, тема)
- **react-hook-form** — формы логина/регистрации
- **Tailwind CSS 4** — стили и анимации
- **Supabase** — Auth + Postgres

---

## Основные фичи

- **Авторизация и регистрация**
  - Форма входа по email/паролю с валидацией и обработкой ошибок.
  - Регистрация с подтверждением пароля через Supabase Auth.
  - Состояние авторизации и текущий пользователь сохраняются в `localStorage` (через zustand `persist`).

- **Дашборд**
  - Карточки:
    - **Active Goals** — количество активных целей (progress < 100%).
    - **Tasks Today** — количество задач на сегодня.
    - **Completed** — общее количество выполненных задач.
    - **Streak** — длина текущей серии дней с выполненными задачами.
    - Подпись `+XX%` под карточкой считается динамически относительно вчерашнего дня.
  - Блок **Last 7 days** — мини‑барчарт по выполненным задачам за последние 7 дней.
  - Виджет **Tasks**:
    - CRUD по задачам: добавление, завершение, удаление.
    - Фильтры All / Active / Completed.
    - Привязка задач к пользователю через `user_id` (uuid Supabase).

- **Goals**
  - Отдельная вкладка `Goals` с CRUD по целям:
    - Добавление цели (название + прогресс‑слайдер 0–100%).
    - Редактирование и удаление целей.
    - Цели хранятся в Supabase (`goals`) и фильтруются по пользователю.
  - На дашборде показываются только реально существующие цели текущего пользователя.

- **Settings**
  - Карточка аккаунта (имя, email, аватар с инициалом).
  - Кнопка **Logout** с очисткой состояния и редиректом на `/login`.
  - Переключатель темы (**light / dark**), состояние темы хранится в zustand и влияет на оформление всех основных страниц.

---

## Запуск проекта

### 1. Установка зависимостей

```bash
npm install
# или
bun install
```

### 2. Настройка Supabase

1) Создайте проект в Supabase.
2) В SQL Editor выполните миграции:

```sql
create table if not exists public.tasks (
  id bigint generated by default as identity primary key,
  title text not null,
  description text,
  date date not null,
  completed boolean not null default false,
  user_id uuid not null references auth.users(id) on delete cascade,
  priority text
);

create table if not exists public.goals (
  id bigint generated by default as identity primary key,
  title text not null,
  progress integer not null default 0,
  user_id uuid not null references auth.users(id) on delete cascade
);

alter table public.tasks enable row level security;
alter table public.goals enable row level security;

create policy "Users can manage their tasks" on public.tasks
  for all using (auth.uid() = user_id) with check (auth.uid() = user_id);

create policy "Users can manage their goals" on public.goals
  for all using (auth.uid() = user_id) with check (auth.uid() = user_id);
```

3) Добавьте переменные окружения в `.env.local`:

```bash
NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

Если включено подтверждение email в Supabase Auth, вход будет доступен после подтверждения письма.

### 3. Запуск фронтенда

```bash
npm run dev
# или
bun dev
```

Приложение будет доступно на `http://localhost:3000`.

Если при логине/регистрации видите ошибку **Failed to fetch**, проверьте `NEXT_PUBLIC_SUPABASE_URL` и `NEXT_PUBLIC_SUPABASE_ANON_KEY`.

---

## Структура проекта (кратко)

- `src/app` — страницы Next.js (`/`, `/login`, `/register`, `/goals`, `/tasks`, `/settings`).
- `src/pages/Dashboard.tsx` — основной дашборд, собирает `Header`, `SideBar`, `Stats`, `Tasks`.
- `src/features/*` — фичи:
  - `loginForm`, `registerForm`, `stats`, `goals`, `settings`.
- `src/entities/*` — доменные сущности (`user`, `task`, `dashboard`).
- `src/shared` — общий код:
  - `api/apiService.ts` — работа с Supabase.
  - `api/supabaseClient.ts` — инициализация клиента Supabase.
  - `store/globalStore.ts` — zustand‑хранилище (авторизация + тема).
  - `ui/*` — переиспользуемые UI‑компоненты (кнопки, инпуты, заголовки, текст).
  - `config/*` — конфиги дашборда и сайдбара.
- `src/widgets/*` — композиционные блоки (header, sidebar, tasks).

---

## Идеи для развития

- Поддержка дедлайнов и напоминаний по задачам.
- Календарный вид для задач/привычек.
- Более продвинутый профайл (аватар, описание, цели по категориям).
- Edge Functions / API‑слой для приватной логики.
- Интернационализация (RU/EN) и сохранение выбранного языка.
